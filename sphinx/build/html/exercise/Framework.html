
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Framework &#8212; Mono Z v1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/groundwork.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../_static/monoz.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Making Histograms" href="Histograms.html" />
    <link rel="prev" title="Introduction" href="Introduction.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Histograms.html" title="Making Histograms"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Mono Z v1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Framework</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <style>
    .red {color:red;}
    .black {color:black; text-shadow:none;}
    .gold {color:#fecb2f;}
</style><section id="framework">
<h1>Framework<a class="headerlink" href="#framework" title="Permalink to this headline">¶</a></h1>
<p>This section will guide you through some of the details of the framework.</p>
<section id="install-the-mono-z-framework">
<h2>Install the Mono-Z framework<a class="headerlink" href="#install-the-mono-z-framework" title="Permalink to this headline">¶</a></h2>
<p>Install framework:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cmsrel CMSSW_10_6_4
<span class="nb">cd</span> CMSSW_10_6_4/src
cmsenv

mkdir PhysicsTools/
git clone https://github.com/yhaddad/nanoAOD-tools.git PhysicsTools/NanoAODTools
git clone git@github.com:yhaddad/MonoZNanoAOD.git PhysicsTools/MonoZ
<span class="nb">cd</span> <span class="nv">$CMSSW_BASE</span>/src/PhysicsTools/MonoZ/
git checkout remotes/origin/CMSDAS_MonoZ

<span class="nb">cd</span> <span class="nv">$CMSSW_BASE</span>/src
scram b -j <span class="m">10</span>
</pre></div>
</div>
</section>
<section id="list-of-backgrounds">
<h2>List of backgrounds<a class="headerlink" href="#list-of-backgrounds" title="Permalink to this headline">¶</a></h2>
<p>Main backgrounds:</p>
<ol class="arabic simple">
<li><p>ZZ (Irreducible)</p></li>
<li><p>WZ (Irreducible)</p></li>
<li><p>top pair production</p></li>
<li><p>WW</p></li>
<li><p>Drell-Yan (DY)</p></li>
<li><p>Triboson</p></li>
</ol>
<p>It’s important to define control regions to check that our simulation well describes the backgrounds. We use 4 main backgrounds for this analysis</p>
<ol class="arabic simple">
<li><p>4 lepton control region (Normalization of ZZ)</p></li>
<li><p>3 lepton control region (Normalization of WZ)</p></li>
<li><p>ElectronMuon control region (Normalization for WW and top pair production)</p></li>
<li><p>Low pTmiss sideband region (Normalization for DY)</p></li>
</ol>
</section>
<section id="look-at-trees-introduction">
<h2>Look at Trees introduction<a class="headerlink" href="#look-at-trees-introduction" title="Permalink to this headline">¶</a></h2>
<p>Install the Mono-Z analysis code (Commands above):</p>
<p>NTuples for 2016 are stored the EOS space we can use:</p>
<p>/eos/user/c/cmsdas/long-exercises/MonoZ/</p>
<p>An example of how to look at a sample root file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cmsenv
root -l /eos/user/c/cmsdas/long-exercises/MonoZ/CMSDAS_NTuples/ZZTo2L2Nu_13TeV_powheg_pythia8_ext1/tree_0.root
</pre></div>
</div>
<p>This will open a root session where you can look at a sample file quickly in an interactive session:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>new TBrowser
</pre></div>
</div>
<p>Each root file contains a TTree called “Events”. The trees have many branches, that correspond to single physics variables. They may be have:</p>
<ol class="arabic simple">
<li><p>single floats, for example variables characterising the whole event</p></li>
<li><p>vectors of variables, for example variables related to a particle type, as pT of the electrons. For these cases, also an an integer defining the size of the vector is present for example “nLepton”. The variables are then defined as Collection_variable (e.g. Electron_pt[0]) and the indexing is such that the objects are pT ordered (Object_pt[0] &gt; Object_pt[1] &gt; Object_pt[2] &gt; …)</p></li>
</ol>
<p>The general strategy is the following:</p>
<ol class="arabic simple">
<li><p><strong>events from the data are required to pass the trigger selections described above (with arbitration described in the following</strong></p></li>
<li><p><strong>in the Monte Carlo simulations (MC) the trigger selection is missing, and it is emulated weighing events with coefficients that mimic the trigger efficiency effect. Weights are used also to correct any residual differences observed between data and MC. All the weights used have to be multiplied, to produce a total weighting factor.</strong></p></li>
</ol>
<p>More information about nanoAOD trees can be found at in the documentation in <a class="reference external" href="https://cms-nanoaod-integration.web.cern.ch/integration/master-102X/mc102X_doc.html">NanoAOD</a></p>
<p>Some variables have been added in the aforementioned post-processing, for example the combined variable “invariant mass of the two leading pT leptons”, Z_mass. If you want to learn more and discover how the variables are built, check here : <a class="reference external" href="https://github.com/yhaddad/MonoZNanoAOD/blob/master/python/MonoZProducer.py">Producer</a></p>
<p>Lets look at some ROOT commands to make some simple histograms.</p>
<p>Lets start by just looking at the pTmiss distribution directly:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Events-&gt;Draw<span class="o">(</span><span class="s2">&quot;met_pt&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>Does it make sense? Ok, let’s add some simple selections. Let’s look at the pTmiss but only for events with 2 electrons with pT&gt;20 GeV:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Events-&gt;Draw<span class="o">(</span><span class="s2">&quot;met_pt&quot;</span>,<span class="s2">&quot;nElectron==2 &amp;&amp; Electron_pt[0]&gt;20. &amp;&amp; Electron_pt[1]&gt;20.&quot;</span>,<span class="s2">&quot;&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>Try to look through the ROOT file and do the same thing as above except for muons. Do they look similar? These commands are very simple but they are often a good way to check things quickly! These Trees also contain several variables that we have added specifically for this analysis. These variables are explained in the next section but one of the most important ones is the mass of the Z boson candidate (Z_mass). Find a sample with a leptonically decaying Z boson (ZZ) and look at this variable.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Events-&gt;Draw<span class="o">(</span><span class="s2">&quot;Z_mass&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>Find a sample that doesn’t have a Z (ttbar). What does it look like there?</p>
<p>Another quick and potentially useful command is to look at both the phi and eta at the same time. Let’s look at this for the Z boson candidate:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Events-&gt;Draw<span class="o">(</span><span class="s2">&quot;Z_eta:Z_phi&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;colz&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="trees-content">
<h2>Trees content<a class="headerlink" href="#trees-content" title="Permalink to this headline">¶</a></h2>
<p>In addition to the standard variables, we pre-compute in the ntuples several combined kinematic variables, that are useful for the analysis. A set of those variables that are used to define the signal region are shown in the table below.</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Variables in NTuple</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><em>Name in NTuple</em></p></th>
<th class="head"><p><em>Description</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Z_pt</p></td>
<td><p>Transverse momentum of the Z boson candidate</p></td>
</tr>
<tr class="row-odd"><td><p>Z_mass</p></td>
<td><p>Invariant mass of the Z boson candidate</p></td>
</tr>
<tr class="row-even"><td><p>delta_phi_ll</p></td>
<td><p><span class="math notranslate nohighlight">\({\Delta\phi}\)</span> between the two leading leptons</p></td>
</tr>
<tr class="row-odd"><td><p>delta_R_ll</p></td>
<td><p><span class="math notranslate nohighlight">\({\Delta R}\)</span> between the two leading leptons</p></td>
</tr>
<tr class="row-even"><td><p>sca_balance</p></td>
<td><p>The ratio of the difference in the missing transverse momentum and the Z boson candidate momentum. Expect small values for recoiling system</p></td>
</tr>
<tr class="row-odd"><td><p>delta_phi_ZMet</p></td>
<td><p><span class="math notranslate nohighlight">\({\Delta\phi}\)</span> between the Z boson candidate and the missing transverse momentum</p></td>
</tr>
<tr class="row-even"><td><p>delta_phi_j_met</p></td>
<td><p><span class="math notranslate nohighlight">\({\Delta\phi}\)</span> between the jet candidate and the missing transverse momentum</p></td>
</tr>
<tr class="row-odd"><td><p>met_pt</p></td>
<td><p>The magnitude of the missing transverse momentum. This is Type-1 PF Met with NVtx corrections applied.</p></td>
</tr>
<tr class="row-even"><td><p>MT</p></td>
<td><p>Transverse mass of the candidate made by the two leading leptons and the MET: <span class="math notranslate nohighlight">\({\sqrt{2p_T^{ll}p_{T}^{miss}(1-cos\Delta\phi_{ll,MET})}}\)</span></p></td>
</tr>
</tbody>
</table>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/monoz.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Framework</a><ul>
<li><a class="reference internal" href="#install-the-mono-z-framework">Install the Mono-Z framework</a></li>
<li><a class="reference internal" href="#list-of-backgrounds">List of backgrounds</a></li>
<li><a class="reference internal" href="#look-at-trees-introduction">Look at Trees introduction</a></li>
<li><a class="reference internal" href="#trees-content">Trees content</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Introduction.html"
                          title="previous chapter">Introduction</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Histograms.html"
                          title="next chapter">Making Histograms</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/exercise/Framework.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Histograms.html" title="Making Histograms"
             >next</a> |</li>
        <li class="right" >
          <a href="Introduction.html" title="Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Mono Z v1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Framework</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2024, The Mono Z CMSDAS Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>